# [BOJ] 15998. ì¹´ì¹´ì˜¤ë¨¸ë‹ˆ(ğŸ¥‡3)

## 1. SOURCE

[https://www.acmicpc.net/problem/15998](https://www.acmicpc.net/problem/15998)

## 2. IDEA

ì´ì „ ì”ì•¡ê³¼ í˜„ì¬ ì…ì¶œê¸ˆë˜ëŠ” ëˆì˜ í•©ì´ ì–‘ìˆ˜ì¸ì§€ ìŒìˆ˜ì¸ì§€ê°€ ì¤‘ìš”í•¨.

í•©ì´ ì–‘ìˆ˜ì´ë©´ (`prev_balance + money >= 0`) 
ì…ì¶œê¸ˆ ëˆê³¼ í˜„ì¬ì˜ ì”ì•¡ì´ ê³„ì‚°ì´ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  ì•„ë‹ê²½ìš° ê°’ì´ ì¡´ì¬í•  ìˆ˜ ì—†ìŒì„ í‘œí˜„í•´ì•¼í•œë‹¤. `value_flag`

í•©ì´ ìŒìˆ˜ì´ë©´ ë³µì¡í•¨...(`prev_balance + money < 0`)
	ì˜ˆì œ1ì„ ë³´ë©´ ê°€ëŠ¥í•œ ìµœì†Œì¶©ì „ë‹¨ìœ„ëŠ” 1ë§Œì›ê³¼ 2ë§Œì›. ë‘˜ ì¤‘ ì •ë‹µì€ 1ë§Œì›ì´ë¯€ë¡œ ì´ëŸ° ê°’ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœëŒ€ê³µì•½ìˆ˜ê°€ í•„ìš”í•˜ë‹¤. ì´ì „ ìµœì†Œì¶©ì „ë‹¨ìœ„ì™€ í˜„ì¬ ì¶©ì „í•´ì•¼í•˜ëŠ” ê°’ì„ ë¹„êµí•˜ë©° ìµœëŒ€ê³µì•½ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
	ìœ„ì˜ ë¶€ë¶„ê¹Œì§€ëŠ” ìƒê°í–ˆì§€ë§Œ ë‹¤ìŒì˜ ê³¼ì •ì€ ìƒê°í•˜ê¸°ê°€ ì–´ë ¤ì› ìŒ.

> ìµœì†Œì”ì•¡ì„ ê³ ë ¤í•´ì¤˜ì•¼í•œë‹¤.
>
> ì”ì•¡ì˜ ìµœì†Œê°’ì€ ë§¤ ë¡œê·¸ë§ˆë‹¤ ì”ì•¡ì´ 0ì´ ì•„ë‹ˆê³  í˜„ì¬ ì”ì•¡ì´ ìµœì†Œì”ì•¡ë³´ë‹¤ ì‘ì€ê²½ìš° ìµœì†Œì”ì•¡ ê°’(`min_balance`)ì„ ê°±ì‹ í•˜ë„ë¡ í•œë‹¤.
>
> ìµœì†Œì”ì•¡ì´ ê³ ë ¤í•´ì•¼í•˜ëŠ” ì´ìœ ëŠ” ìµœì†Œì¶©ì „ë‹¨ìœ„ê°€ 1ë§Œì›ì¼ë•Œ ì”ì•¡ì´ 1ë§Œ5ì²œì›ì´ë©´ ì¶©ì „í•  í•„ìš”ì„±ì´ ì—†ì–´ì§„ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `min_charge <= min_balance` ê·¸ë¦¬ê³  ì”ì•¡ì´ 0ì¼ ê²½ìš° ìµœì†Œì”ì•¡ ê°±ì‹ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šê²Œ ëœë‹¤. ì´ë•Œ min_balanceë¥¼ ì´ˆê¸° ì„¤ì •í•œ ìµœëŒ€MAXIê°’ì„ ê°–ê²Œ ë˜ë¯€ë¡œ ì´ëŸ° ê²½ìš°ì—ë„ `value_flag=False`ë¡œ ë§Œë“¤ì–´ ë°˜ë³µë¬¸ì„ ë¹ ì ¸ë‚˜ì˜¤ê²Œ ë§Œë“ ë‹¤.

ì´ ëª¨ë“  ê³¼ì •ì´ ì›í™œí•˜ê²Œ ì´ë¤„ì§„ ê²½ìš° `prev_balance`ë¥¼ ê°±ì‹ í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤.

ìµœì†Œì¶©ì „ë‹¨ìœ„ì˜ ê°’ì´ ì¡´ì¬í•˜ê³  (`value_flag`) ìµœì†Œì¶©ì „ë‹¨ìœ„ê°€ 0ì´ ì•„ë‹ë•ŒëŠ” ìµœì†Œì¶©ì „ë‹¨ìœ„ë¥¼ ì¶œë ¥í•œë‹¤.
ìµœì†Œì¶©ì „ë‹¨ìœ„ì˜ ê°’ì´ ì¡´ì¬í•˜ê³  (`value_flag`) ìµœì†Œì¶©ì „ë‹¨ìœ„ê°€ 0ì¼ë•ŒëŠ” ì¶©ì „ì„ í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°ì´ê¸° ë•Œë¬¸ì— ìµœì†Œì¶©ì „ë‹¨ìœ„ë¡œ 1ì„ ì¶œë ¥í•œë‹¤.
ìµœì†Œì¶©ì „ë‹¨ìœ„ê°€ ì¡´ì¬í• ìˆ˜ ì—†ì„ë•Œ -1ì„ ì¶œë ¥í•œë‹¤.

<BR>

## 3. SOLUTION

```python
import sys
input = sys.stdin.readline

n = int(input())

prev_balance = 0   # ì´ì „ ì”ì•¡
MAXI = 9*(10**18)  # ìµœëŒ€ê°’ ìƒìˆ˜ë³€ìˆ˜
min_charge = 0     # ìµœì†Œ ì¶©ì „ ë‹¨ìœ„
value_flag = True  # ê°’ ì¡´ì¬ì—¬ë¶€ flag
min_balance = MAXI # ì”ì•¡ì˜ ìµœì†Œê°’


def gcd(x, y):
    while y:
        x, y = y, x % y
    return x

    
for _ in range(n):
	money, balance = map(int, input().split())

	if prev_balance + money < 0:
		if balance != 0 and balance < min_balance:
			min_balance = balance

		min_charge = gcd(balance-prev_balance-money, min_charge)

		if min_charge <= min_balance and min_balance != MAXI:
			value_flag = False
			break

	else: # prev_balance + money >= 0
		if prev_balance + money != balance:
			value_flag = False
			break
	prev_balance = balance

if value_flag and min_charge != 0:
	print(min_charge)
elif value_flag and min_charge == 0:
	print(1)
else:
	print(-1)

```

